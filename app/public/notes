To Do:

Sharpen text

/global - Style /login

/opportunity-fund - Edit Schedule A Call Link
/opportunity-fund - Download PDF what PDF?

/global - All 'Register' Buttons => Register Modal
/global - All 'Need help...' links are set to investments@placeholder.Compare
/resources - Subscribe to Newsletter needs working link

/faq - See first question in 'About' Section and note all emails listed

/check numbers on graphs and charts

/global - edit form styling

/global - fix button--custom padding












function ajax_login_init(){

  wp_register_script('ajax-login-script', get_template_directory_uri() . '/ajax-login-script.js', array('jquery') ); 
  wp_enqueue_script('ajax-login-script');

  wp_localize_script( 'ajax-login-script', 'ajax_login_object', array( 
      'ajaxurl' => admin_url( 'admin-ajax.php' ),
      'redirecturl' => 'investments', /* Was home_url() for home page*/
      'loadingmessage' => __('Sending user info, please wait...')
  ));

  // Enable the user with no privileges to run ajax_login() in AJAX
  add_action( 'wp_ajax_nopriv_ajaxlogin', 'ajax_login' );
}

// Execute the action only if the user isn't logged in
if (!is_user_logged_in()) {
  add_action('init', 'ajax_login_init');
}

// AJAX Continued ---

function ajax_login(){

  // First check the nonce, if it fails the function will break
  check_ajax_referer( 'ajax-login-nonce', 'security' );

  // Nonce is checked, get the POST data and sign user on
  $info = array();
  $info['user_login'] = $_POST['username'];
  $info['user_password'] = $_POST['password'];
  $info['remember'] = true;

  $user_signon = wp_signon( $info, false );
  if ( is_wp_error($user_signon) ){
      echo json_encode(array('loggedin'=>false, 'message'=>__('Wrong username or password.')));
  } else {
      echo json_encode(array('loggedin'=>true, 'message'=>__('Login successful, redirecting...')));
  }

  die();
} 